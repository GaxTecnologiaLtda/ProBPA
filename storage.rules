rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // Regras de Logotipo de Entidade
    match /entities/{entityId}/logos/{fileName} {
      allow read: if true;
      allow write: if request.auth != null; // Claims verification can be tricky in storage rules without custom tokens setup properly so keeping simple auth for now or checking path match
    }

    // Regras de Assinatura de Profissional
    match /signatures/temp/{fileName} {
      allow read: if true;
      allow write: if true; // Public Registration
    }
    
    match /signatures/{entityId}/{fileName} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    match /{allPaths=**} {
      allow read, write: if request.auth != null;
    }
  }
}
